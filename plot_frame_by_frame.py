import numpy as np
import matplotlib.pyplot as plt
import librosa

# Load an audio file
file_path = 'RobertKirchner5-15-2023.m4a'
audio_time_series, sampling_rate = librosa.load(file_path, sr=None)

# Define frame size and hop length
frame_size = 1024
hop_length = 512

# Total number of frames
total_frames = 1 + int((len(audio_time_series) - frame_size) / hop_length)

# Plotting each frame
for i in range(total_frames):
    # Calculate start and end sample indices for the current frame
    start_idx = i * hop_length
    end_idx = start_idx + frame_size
    current_frame = audio_time_series[start_idx:end_idx]
    
    # Time axis for the current frame (in seconds)
    frame_time = np.linspace(start_idx / sampling_rate, end_idx / sampling_rate, frame_size)
    
    # Plot the current frame
    plt.figure(figsize=(10, 2))
    plt.plot(frame_time, current_frame)
    plt.title(f'Frame {i+1}')
    plt.xlabel('Time (s)')
    plt.ylabel('Amplitude')
    plt.show()