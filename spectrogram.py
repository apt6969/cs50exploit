import librosa
import librosa.display
import matplotlib.pyplot as plt
import numpy as np

# Load an audio file
file_path = 'RobertKirchner5-15-2023.m4a'
audio, sampling_rate = librosa.load(file_path, sr=None)

# Compute the Short-Time Fourier Transform (STFT) to get the frequency content over time
n_fft = 2048  # Length of the FFT window
hop_length = 512  # Number of samples between successive frames
stft = librosa.stft(audio, n_fft=n_fft, hop_length=hop_length)

# Convert the STFT from the complex numbers to amplitude
D = np.abs(stft)

# Convert amplitude to decibels for visualization
D_db = librosa.amplitude_to_db(D, ref=np.max)

# Plot the spectrogram
plt.figure(figsize=(12, 8))
librosa.display.specshow(D_db, sr=sampling_rate, hop_length=hop_length, x_axis='time', y_axis='linear')
plt.colorbar(format='%+2.0f dB')
plt.title('Spectrogram')
plt.xlabel('Time')
plt.ylabel('Frequency')
plt.show()